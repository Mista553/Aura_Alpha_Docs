# 6. å¸¸è§é—®é¢˜ä¸æ”¯æŒ

æœ¬ç« èŠ‚æ±‡æ€»äº† Aura Alpha å¼€å‘è¿‡ç¨‹ä¸­çš„å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆã€‚

---

## ğŸ“‘ ç›®å½•

- [å¯åŠ¨é—®é¢˜](#å¯åŠ¨é—®é¢˜)
- [éŸ³é¢‘é—®é¢˜](#éŸ³é¢‘é—®é¢˜)
- [ç”µæœºé—®é¢˜](#ç”µæœºé—®é¢˜)
- [æ„ŸçŸ¥é—®é¢˜](#æ„ŸçŸ¥é—®é¢˜)
- [è¯­éŸ³äº¤äº’é—®é¢˜](#è¯­éŸ³äº¤äº’é—®é¢˜)
- [æ˜¾ç¤ºé—®é¢˜](#æ˜¾ç¤ºé—®é¢˜)
- [ç¼–è¯‘é—®é¢˜](#ç¼–è¯‘é—®é¢˜)
- [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜)

---

## å¯åŠ¨é—®é¢˜

### Q1: å¯åŠ¨æ—¶æŠ¥é”™ "package not found"

**ç°è±¡**ï¼š
```
Package 'robot_bringup' not found
```

**åŸå› **ï¼šæœªæ­£ç¡® source å·¥ä½œç©ºé—´

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åŠ è½½ ROS2 ç¯å¢ƒ
source /opt/tros/humble/setup.bash

# åŠ è½½å·¥ä½œç©ºé—´
source ~/robot_ws/workspace/install/setup.bash

# é‡æ–°å¯åŠ¨
ros2 launch robot_bringup bringup.launch.py
```

---

### Q2: èŠ‚ç‚¹å¯åŠ¨è¶…æ—¶

**ç°è±¡**ï¼š
```
Timeout waiting for /display/ready
```

**åŸå› **ï¼šä¾èµ–èŠ‚ç‚¹æœªæ­£å¸¸å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥ä¾èµ–èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š
```bash
ros2 node list
```

2. æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—ï¼š
```bash
ros2 launch robot_bringup bringup.launch.py --log-level debug
```

3. å•ç‹¬å¯åŠ¨é—®é¢˜èŠ‚ç‚¹æ’æŸ¥ï¼š
```bash
ros2 run display_node display_node
```

---

### Q3: æƒé™ä¸è¶³

**ç°è±¡**ï¼š
```
Permission denied: /dev/ttyUSB0
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ·»åŠ ç”¨æˆ·åˆ° dialout ç»„
sudo usermod -aG dialout $USER

# é‡æ–°ç™»å½•æˆ–æ‰§è¡Œ
newgrp dialout

# æˆ–ä¸´æ—¶ä¿®æ”¹æƒé™
sudo chmod 666 /dev/ttyUSB0
```

---

## éŸ³é¢‘é—®é¢˜

### Q4: æ‰¾ä¸åˆ°éŸ³é¢‘è®¾å¤‡

**ç°è±¡**ï¼š
```
ALSA: cannot open device 'plughw:0,0'
```

**åŸå› **ï¼šéŸ³é¢‘è®¾å¤‡æœªæ­£ç¡®è¯†åˆ«

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥éŸ³é¢‘è®¾å¤‡ï¼š
```bash
aplay -l
arecord -l
```

2. ç¡®è®¤è®¾å¤‡åç§°ï¼Œä¿®æ”¹é…ç½®ï¼š
```yaml
# config/audio_duplex.yaml
audio_duplex_node:
  ros__parameters:
    device: "plughw:1,0"  # æ ¹æ®å®é™…è®¾å¤‡ä¿®æ”¹
```

---

### Q5: å½•éŸ³æ— å£°éŸ³

**ç°è±¡**ï¼šå‘å¸ƒçš„éŸ³é¢‘æ•°æ®å…¨ä¸ºé›¶

**åŸå› **ï¼šéº¦å…‹é£å¢ç›Šè¿‡ä½æˆ–æœªå¯ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥ tinymix é…ç½®ï¼š
```bash
tinymix
```

2. è°ƒæ•´å½•éŸ³å‚æ•°ï¼š
```yaml
audio_duplex_node:
  ros__parameters:
    left_input_boost_volume: 5   # å¢å¤§å¢ç›Š (0-7)
    right_input_boost_volume: 5
    capture_volume: 50           # å¢å¤§å½•éŸ³éŸ³é‡ (0-63)
    adc_pcm_capture_volume: 220  # å¢å¤§ ADC éŸ³é‡ (0-255)
```

---

### Q6: æ’­æ”¾æœ‰æ‚éŸ³/çˆ†éŸ³

**ç°è±¡**ï¼šæ‰¬å£°å™¨æ’­æ”¾æ—¶æœ‰æ˜æ˜¾æ‚éŸ³

**åŸå› **ï¼šéŸ³é‡è¿‡é«˜å¯¼è‡´å¤±çœŸï¼Œæˆ–ç¼“å†²åŒºè¿‡å°

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. é™ä½æ’­æ”¾éŸ³é‡ï¼š
```yaml
audio_duplex_node:
  ros__parameters:
    speaker_playback_volume: 100  # é™ä½ (0-127)
    playback_volume: 200          # é™ä½ (0-255)
```

2. å¢å¤§æ’­æ”¾ç¼“å†²åŒºï¼š
```yaml
audio_duplex_node:
  ros__parameters:
    playback_queue_size: 800  # å¢å¤§ç¼“å†²
```

---

## ç”µæœºé—®é¢˜

### Q7: ç”µæœºæ— å“åº”

**ç°è±¡**ï¼šå‘å¸ƒ `/cmd_vel` ä½†ç”µæœºä¸åŠ¨

**æ’æŸ¥æ­¥éª¤**ï¼š

1. æ£€æŸ¥ä¸²å£è¿æ¥çŠ¶æ€ï¼š
```bash
ros2 topic echo /motor/connected
```

2. æ£€æŸ¥æ˜¯å¦æ”¶åˆ°æŒ‡ä»¤ï¼š
```bash
ros2 topic echo /cmd_vel
```

3. æ£€æŸ¥ä¸²å£è®¾å¤‡ï¼š
```bash
ls -la /dev/ttyUSB*
```

4. æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ä¸²å£è·¯å¾„ï¼š
```yaml
motor_node:
  ros__parameters:
    serial_port: "/dev/ttyUSB0"  # ç¡®è®¤è·¯å¾„æ­£ç¡®
```

---

### Q8: ç”µæœºæ–¹å‘ç›¸å

**ç°è±¡**ï¼šå‘é€å‰è¿›æŒ‡ä»¤ä½†ç”µæœºåé€€

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. è°ƒæ•´è§’é€Ÿåº¦æ–¹å‘ï¼š
```yaml
motor_node:
  ros__parameters:
    invert_angular: true  # å–åè§’é€Ÿåº¦
```

2. æˆ–åœ¨ä»£ç ä¸­å–åçº¿é€Ÿåº¦ï¼š
```python
msg.linear.x = -speed  # å–å
```

---

### Q9: ç”µæœºæŠ–åŠ¨

**ç°è±¡**ï¼šç”µæœºé¢‘ç¹å¯åœï¼Œè¿åŠ¨ä¸å¹³æ»‘

**åŸå› **ï¼šæ§åˆ¶æŒ‡ä»¤é¢‘ç‡è¿‡ä½æˆ–æ­»åŒºè®¾ç½®ä¸å½“

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æé«˜æ§åˆ¶é¢‘ç‡ï¼ˆåœ¨è‡ªå®šä¹‰èŠ‚ç‚¹ä¸­ï¼‰ï¼š
```python
self.timer = self.create_timer(0.02, self.control_callback)  # 50Hz
```

2. å¢åŠ æ­»åŒºèŒƒå›´ï¼š
```python
if abs(cmd.linear.x) < 0.05:  # æ­»åŒº
    cmd.linear.x = 0.0
```

---

## æ„ŸçŸ¥é—®é¢˜

### Q10: äººä½“æ£€æµ‹æ— è¾“å‡º

**ç°è±¡**ï¼š`/hobot_mono2d_body_detection` è¯é¢˜æ— æ•°æ®

**æ’æŸ¥æ­¥éª¤**ï¼š

1. æ£€æŸ¥ç›¸æœºç±»å‹ç¯å¢ƒå˜é‡ï¼š
```bash
export CAM_TYPE=mipi  # æˆ– usb
```

2. æ£€æŸ¥ç›¸æœºæ˜¯å¦æ­£å¸¸ï¼š
```bash
# MIPI ç›¸æœº
ls /dev/video*

# USB ç›¸æœº
v4l2-ctl --list-devices
```

3. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
ls ~/robot_ws/workspace/config/*.bin
```

---

### Q11: æ£€æµ‹å¸§ç‡ä½

**ç°è±¡**ï¼šæ£€æµ‹é¢‘ç‡ä½äºé¢„æœŸ

**åŸå› **ï¼šæœªä½¿ç”¨ BPU åŠ é€Ÿæˆ–æ¨¡å‹è¿‡å¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ç¡®è®¤ç¼–è¯‘æ—¶æŒ‡å®šäº†æ­£ç¡®å¹³å°ï¼š
```bash
colcon build --cmake-args -DPLATFORM_X5=ON
```

2. æ£€æŸ¥ BPU å ç”¨ï¼š
```bash
hrut_somstatus
```

---

### Q12: è·Ÿè¸ªç›®æ ‡ä¸¢å¤±é¢‘ç¹

**ç°è±¡**ï¼šäººä½“è·Ÿè¸ªç»å¸¸ä¸¢å¤±ç›®æ ‡

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. è°ƒæ•´ä¸¢å¤±é˜ˆå€¼ï¼š
```yaml
body_tracking_node:
  ros__parameters:
    track_serial_lost_num_thr: 50  # å¢å¤§é˜ˆå€¼
```

2. é™ä½æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼ï¼š
```yaml
mono2d_body_detection_node:
  ros__parameters:
    score_threshold: 0.3  # é™ä½é˜ˆå€¼
```

---

## è¯­éŸ³äº¤äº’é—®é¢˜

### Q13: äº‘ç«¯è¿æ¥å¤±è´¥

**ç°è±¡**ï¼š
```
WebSocket connection failed
```

**æ’æŸ¥æ­¥éª¤**ï¼š

1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š
```bash
ping www.baidu.com
```

2. æ£€æŸ¥ API å‡­è¯é…ç½®ï¼š
```yaml
cloud_realtime_node:
  ros__parameters:
    volcano:
      app_id: "your_app_id"      # ç¡®è®¤æ­£ç¡®
      access_token: "your_token"  # ç¡®è®¤æ­£ç¡®
```

3. æ£€æŸ¥æœåŠ¡å•†çŠ¶æ€ï¼ˆå¯èƒ½æœ‰æœåŠ¡ä¸­æ–­ï¼‰

---

### Q14: è¯­éŸ³è¯†åˆ«ä¸å‡†ç¡®

**ç°è±¡**ï¼šASR è¯†åˆ«ç»“æœä¸å®é™…è¯´è¯å†…å®¹ä¸ç¬¦

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æé«˜å½•éŸ³è´¨é‡ï¼ˆå‚è€ƒ Q5ï¼‰

2. å‡å°‘ç¯å¢ƒå™ªéŸ³

3. è°ƒæ•´ VAD å‚æ•°ï¼ˆå¦‚æœæ”¯æŒï¼‰

4. å°è¯•æ›´æ¢æœåŠ¡å•†ï¼š
```yaml
cloud_realtime_node:
  ros__parameters:
    provider: "baidu"  # å°è¯•å…¶ä»–æœåŠ¡å•†
```

---

### Q15: TTS æ’­æ”¾å»¶è¿Ÿå¤§

**ç°è±¡**ï¼šAI å›å¤åˆ°æ’­æ”¾ä¹‹é—´å»¶è¿Ÿæ˜æ˜¾

**åŸå› **ï¼šç½‘ç»œå»¶è¿Ÿæˆ–ç¼“å†²åŒºè¿‡å¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ä½¿ç”¨å›½å†…æœåŠ¡å•†ï¼ˆç«å±±å¼•æ“ã€ç™¾åº¦ï¼‰

2. å‡å°æ’­æ”¾ç¼“å†²åŒºï¼š
```yaml
audio_duplex_node:
  ros__parameters:
    playback_queue_size: 300  # å‡å°ç¼“å†²
```

---

## æ˜¾ç¤ºé—®é¢˜

### Q16: è§†é¢‘æ— æ³•æ’­æ”¾

**ç°è±¡**ï¼šæ˜¾ç¤ºèŠ‚ç‚¹å¯åŠ¨ä½†æ— ç”»é¢

**æ’æŸ¥æ­¥éª¤**ï¼š

1. æ£€æŸ¥è§†é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
ls ~/robot_ws/workspace/videos/
```

2. æ£€æŸ¥è§†é¢‘æ ¼å¼æ˜¯å¦æ”¯æŒï¼š
```bash
ffprobe idle.mp4
```

3. å°è¯•ä¸åŒçš„æ¸²æŸ“åç«¯ï¼š
```yaml
display_node:
  ros__parameters:
    backend: "pygame"  # å°è¯• pygame æˆ– tkinter
```

---

### Q17: æ˜¾ç¤ºå¡é¡¿

**ç°è±¡**ï¼šè§†é¢‘æ’­æ”¾ä¸æµç•…

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ä½¿ç”¨ GStreamer ç¡¬ä»¶åŠ é€Ÿï¼š
```yaml
display_node:
  ros__parameters:
    backend: "gstreamer"
```

2. é™ä½è§†é¢‘åˆ†è¾¨ç‡æˆ–å¸§ç‡

3. æ£€æŸ¥ CPU å ç”¨ï¼š
```bash
htop
```

---

## ç¼–è¯‘é—®é¢˜

### Q18: C++ åŒ…ç¼–è¯‘å¤±è´¥

**ç°è±¡**ï¼š
```
CMake Error: Could not find dnn_node
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ç¡®ä¿å·²å®‰è£… TogetheROSï¼š
```bash
source /opt/tros/humble/setup.bash
```

2. å®‰è£…ç¼ºå¤±ä¾èµ–ï¼š
```bash
sudo apt install ros-humble-dnn-node ros-humble-ai-msgs
```

---

### Q19: å¹³å°ä¸åŒ¹é…

**ç°è±¡**ï¼š
```
Model inference failed: platform mismatch
```

**åŸå› **ï¼šç¼–è¯‘æ—¶æœªæŒ‡å®šæ­£ç¡®å¹³å°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
rm -rf build/ install/

# æŒ‡å®šæ­£ç¡®å¹³å°
colcon build --cmake-args -DPLATFORM_X5=ON
```

---

## æ€§èƒ½é—®é¢˜

### Q20: CPU å ç”¨è¿‡é«˜

**ç°è±¡**ï¼šç³»ç»Ÿå“åº”ç¼“æ…¢ï¼ŒCPU å ç”¨ > 80%

**æ’æŸ¥æ­¥éª¤**ï¼š

1. æŸ¥çœ‹å„è¿›ç¨‹ CPU å ç”¨ï¼š
```bash
htop
```

2. æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† BPU åŠ é€Ÿ

3. é™ä½ä¸å¿…è¦çš„è¯é¢˜å‘å¸ƒé¢‘ç‡

4. å…³é—­è°ƒè¯•æ—¥å¿—ï¼š
```yaml
# log_levels.yaml
log_levels:
  motor_node: fatal
  audio_duplex: fatal
  cloud_realtime: fatal
```

---

### Q21: å†…å­˜æ³„æ¼

**ç°è±¡**ï¼šè¿è¡Œä¸€æ®µæ—¶é—´åå†…å­˜å ç”¨æŒç»­å¢é•¿

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥æ˜¯å¦æœ‰æœªé‡Šæ”¾çš„èµ„æº

2. é‡å¯é—®é¢˜èŠ‚ç‚¹ï¼š
```bash
ros2 lifecycle set /node_name shutdown
ros2 lifecycle set /node_name configure
ros2 lifecycle set /node_name activate
```

3. å®šæœŸé‡å¯ç³»ç»Ÿï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# å¯åŠ¨æ—¶è®¾ç½®æ—¥å¿—çº§åˆ«
ros2 launch robot_bringup bringup.launch.py --log-level debug

# æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶
# log_levels.yaml
log_levels:
  motor_node: debug
```

### å½•åˆ¶è¯é¢˜æ•°æ®

```bash
# å½•åˆ¶
ros2 bag record /audio_data /cmd_vel /imu/data -o my_bag

# å›æ”¾
ros2 bag play my_bag
```

### å¯è§†åŒ–å·¥å…·

```bash
# æŸ¥çœ‹è¯é¢˜å…³ç³»å›¾
rqt_graph

# æŸ¥çœ‹è¯é¢˜æ•°æ®
rqt_topic

# ç»˜åˆ¶æ•°æ®æ›²çº¿
rqt_plot /imu/data/angular_velocity/z
```

---

## ğŸ“ è·å–æ”¯æŒ

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆæ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ”¯æŒï¼š

1. **æŸ¥é˜…æ–‡æ¡£**ï¼šç¡®è®¤å·²é˜…è¯»ç›¸å…³ç« èŠ‚çš„å®Œæ•´å†…å®¹

2. **ç¤¾åŒºè®ºå›**ï¼šåœ¨å¼€å‘è€…ç¤¾åŒºå‘å¸–æ±‚åŠ©

3. **æäº¤ Issue**ï¼šåœ¨ GitHub ä»“åº“æäº¤è¯¦ç»†çš„é—®é¢˜æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š
   - é—®é¢˜æè¿°
   - å¤ç°æ­¥éª¤
   - é”™è¯¯æ—¥å¿—
   - ç³»ç»Ÿç¯å¢ƒä¿¡æ¯

4. **æŠ€æœ¯æ”¯æŒ**ï¼šè”ç³»å®˜æ–¹æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

## ğŸ“‹ ç¯å¢ƒä¿¡æ¯æ”¶é›†

æäº¤é—®é¢˜æ—¶ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# ç³»ç»Ÿä¿¡æ¯
uname -a
cat /etc/os-release

# ROS2 ç‰ˆæœ¬
ros2 --version

# å·²å®‰è£…çš„åŒ…
ros2 pkg list | grep -E "(robot|audio|motor|display)"

# è¯é¢˜åˆ—è¡¨
ros2 topic list

# èŠ‚ç‚¹åˆ—è¡¨
ros2 node list
```

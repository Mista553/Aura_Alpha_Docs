# 1. 硬件规格

本章节详细列出了 Aura Alpha 的各项硬件技术指标。这些数据能够帮助您在进行二次开发、算法部署以及物理仿真时，进行精确的参数对齐。

---

## 🖥️ 计算平台

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 主控芯片 | RDK X5 | 地平线旭日 5 系列 |
| CPU | 8 核 ARM Cortex-A55 | 最高 1.8GHz |
| BPU | 双核 Bernoulli 3.0 | 10 TOPS 算力 |
| 内存 | 4GB LPDDR4 | 可选 8GB 版本 |
| 存储 | 32GB eMMC | 可扩展 TF 卡 |
| 操作系统 | Ubuntu 22.04 | 预装 TogetheROS Humble |

---

## 📐 物理参数

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 外形尺寸 | 待定 | 球体外径尺寸 |
| 重量 | 待定 | 包含标准电池的整机重量 |
| 外壳材质 | 待定 | 影响表面摩擦系数与抗冲击性能 |
| 防护等级 | 待定 | 防尘防水等级 |

---

## ⚡ 动力系统

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 驱动方式 | 双轮差速驱动 | 左右独立电机 |
| 轴距 | 0.30 m | 左右轮中心距离（可配置） |
| 最大线速度 | 0.5 m/s | 软件限制，可调整 |
| 最大角速度 | 2.0 rad/s | 软件限制，可调整 |
| 通信接口 | 串口 (UART) | 115200 bps |

### 运动学参数

差速驱动运动学公式：

```
v_left  = v_x - ω_z × wheel_base / 2
v_right = v_x + ω_z × wheel_base / 2
```

| 参数 | 符号 | 默认值 | 单位 |
|------|------|--------|------|
| 线速度 | v_x | - | m/s |
| 角速度 | ω_z | - | rad/s |
| 轴距 | wheel_base | 0.30 | m |

---

## 🔋 电源系统

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 电池类型 | 锂电池 | 可充电 |
| 充电接口 | Type-C | 支持快充 |
| 电压监测 | 支持 | 通过 `/battery_state` 话题发布 |
| 低电量保护 | 支持 | < 10% 自动限速 |

### 电池状态话题

```
话题名称: /battery_state
消息类型: sensor_msgs/msg/BatteryState
发布频率: 1 Hz

字段说明:
- voltage: 当前电压 (V)
- percentage: 电量百分比 (0.0-1.0)
```

---

## 📡 感知系统

### IMU（惯性测量单元）

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 类型 | 六轴 (6-axis) | 三轴陀螺仪 + 三轴加速度计 |
| 采样频率 | 10 Hz | 可配置 |
| 数据输出 | 角速度 + 姿态四元数 | 通过 `/imu/data` 话题发布 |

### IMU 数据话题

```
话题名称: /imu/data
消息类型: sensor_msgs/msg/Imu
发布频率: 10 Hz

字段说明:
- orientation: 姿态四元数 (x, y, z, w)
- angular_velocity: 角速度 (rad/s)
- linear_acceleration: 线加速度 (m/s²)
```

### 视觉系统

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 相机类型 | MIPI / USB | 通过环境变量 CAM_TYPE 配置 |
| 分辨率 | 640×480 | 检测输入分辨率 |
| 帧率 | 30 fps | 典型值 |
| 检测模型 | YOLOv8n Pose | BPU 加速推理 |

### 人体检测输出

```
话题名称: /hobot_mono2d_body_detection
消息类型: ai_msgs/msg/PerceptionTargets
发布频率: ~30 Hz

输出内容:
- 人体边界框 (Bounding Box)
- 17 个人体关键点坐标
- 置信度分数
```

---

## 🔊 音频系统

### 音频芯片

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 芯片型号 | WM8960 | 低功耗立体声编解码器 |
| 接口类型 | I2S | 数字音频接口 |
| ALSA 设备 | plughw:0,0 | 默认设备名 |

### 录音参数

| 参数项 | 规格参数 | 范围 | 说明 |
|:-------|:---------|:-----|:-----|
| 采样率 | 16000 Hz | - | 语音识别标准采样率 |
| 位深度 | 16 bit | - | PCM 格式 |
| 通道数 | 2 | 1-2 | 双声道 |
| 帧大小 | 320 采样点 | - | 20ms 一帧 |

### 录音增益控制

| 参数名 | 默认值 | 范围 | 说明 |
|--------|--------|------|------|
| left_input_boost_volume | 3 | 0-7 | 左声道输入增益 |
| right_input_boost_volume | 3 | 0-7 | 右声道输入增益 |
| capture_volume | 40 | 0-63 | 录音音量 |
| adc_pcm_capture_volume | 200 | 0-255 | ADC PCM 音量 |

### 播放参数

| 参数名 | 默认值 | 范围 | 说明 |
|--------|--------|------|------|
| speaker_dc_volume | 3 | 0-5 | 扬声器 DC 音量 |
| speaker_ac_volume | 3 | 0-5 | 扬声器 AC 音量 |
| speaker_playback_volume | 127 | 0-127 | 扬声器播放音量 |
| playback_volume | 255 | 0-255 | 总播放音量 |

### 音频话题

| 话题名称 | 消息类型 | 方向 | 说明 |
|---------|---------|------|------|
| `/audio_data` | `UInt8MultiArray` | 发布 | 麦克风原始音频 |
| `/audio_playback` | `UInt8MultiArray` | 订阅 | 待播放音频 |

---

## 🖥️ 显示系统

| 参数项 | 规格参数 | 说明 |
|:-------|:---------|:-----|
| 显示接口 | HDMI / MIPI DSI | 根据硬件配置 |
| 渲染后端 | GStreamer | 硬件加速（推荐） |
| 备选后端 | Pygame / Tkinter | 软件渲染 |
| 目标帧率 | 30 fps | 视频播放帧率 |

---

## 🔌 接口说明

### 外部接口

| 接口 | 类型 | 用途 |
|------|------|------|
| 充电口 | Type-C | 充电和供电 |
| 调试串口 | Type-C | 底层 Log 抓取与异常排查 |
| USB | USB 3.0 | 外接设备（相机、存储等） |

### 串口通信协议

| 参数 | 值 | 说明 |
|------|-----|------|
| 波特率 | 115200 | bps |
| 数据位 | 8 | - |
| 停止位 | 1 | - |
| 校验位 | 无 | - |
| 设备路径 | /dev/ttyUSB0 | 默认路径 |

### 内部扩展

系统预留内部扩展空间，允许开发者在满足动平衡要求的前提下，加装微型载荷（如额外的视觉模块等）。

> **⚠️ 注意**
> 在连接调试串口或开启内部扩展舱时，请务必确保 Aura 处于**完全关机**状态。通电状态下的强制连接可能会触发姿态保护机制，导致设备意外剧烈转动。

---

## 📊 软件参数配置

### 电机节点参数

配置文件：`motor_node/config/config.yaml`

```yaml
motor_node:
  ros__parameters:
    # 串口配置
    serial_port: "/dev/ttyUSB0"
    baudrate: 115200

    # 差速驱动参数
    wheel_base: 0.30          # 轴距 (m)
    max_linear_speed: 0.5     # 最大线速度 (m/s)
    max_angular_speed: 2.0    # 最大角速度 (rad/s)

    # 安全参数
    cmd_vel_timeout: 0.5      # 无指令超时停车 (s)
    reconnect_delay: 3.0      # 串口重连间隔 (s)

    # 传感器参数
    sensor_rate: 10.0         # 传感器发布频率 (Hz)
    invert_angular: false     # 角速度方向取反
```

### 音频节点参数

配置文件：`audio_vm8960_node/config/audio_duplex.yaml`

```yaml
audio_duplex_node:
  ros__parameters:
    # 基础配置
    sample_rate: 16000
    channels: 2
    period_size: 320
    device: "plughw:0,0"

    # 话题配置
    input_topic: "audio_data"
    output_topic: "audio_playback"
    publish_rate: 50.0

    # 队列配置
    record_queue_size: 100
    playback_queue_size: 500
```

---

## 🔧 硬件调试

### 检查串口设备

```bash
# 列出串口设备
ls -la /dev/ttyUSB*

# 检查设备权限
sudo chmod 666 /dev/ttyUSB0

# 添加用户到 dialout 组
sudo usermod -aG dialout $USER
```

### 检查音频设备

```bash
# 列出播放设备
aplay -l

# 列出录音设备
arecord -l

# 查看 ALSA 混音器
tinymix
```

### 检查相机设备

```bash
# 列出视频设备
ls /dev/video*

# USB 相机信息
v4l2-ctl --list-devices
```

### 检查 BPU 状态

```bash
# 查看 BPU 占用
hrut_somstatus
```
